<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <!-- подключение официальной Telegram WebApp-библиотеки -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h1>Проверка ID...</h1>
  <p id="tg_id">Telegram ID</p>
  <p id="result">Загрузка...</p>

  <script>

    // Получаем объект Telegram WebApp
    var tg = window.Telegram.WebApp;
    tg.ready();
    // Получаем объект пользователя
    //var user = tg.initDataUnsafe.user;

    // Временно — для теста в обычном браузере
    var user = {
      id: 640055320
    };
    

    // Выводим ID пользователя
    if (user && user.id) {
      document.getElementById("tg_id").innerText = user.id;
    } else {
      document.getElementById("tg_id").innerText = "ID не получен";
    }

    // Формируем объект с ID пользователя
    var dataToSend = {
      chat_id: user.id
    };

    // fetch() — это асинхронная функция, она не сразу даёт результат.
    // Она возвращает обещание (Promise) — что когда-нибудь результат придёт.
    // then(...) = "когда придёт ответ, тогда сделай..."

    fetch("https://jsonplaceholder.typicode.com/posts", {
  method: "POST",
  body: JSON.stringify({ title: "test" }),
  headers: {
    "Content-Type": "application/json"
  }
})
.then(res => res.json())
.then(data => {
  document.getElementById("result").innerText = "OK: " + JSON.stringify(data);
})
.catch(err => {
  document.getElementById("result").innerText = "Fetch error: " + err;
});

  </script>
</body>
</html>
